(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".province").forEach((e=>{e.addEventListener("click",(function(){const e=this.dataset.provinceId,n=this.dataset.dependencyMapItem,t=this.dataset.provinceLink;console.log("province link: ",t);const i=pluginData.pluginUrl;fetch(`/wp-json/wp/v2/dependency?province=${e}&_embed`).then((e=>{if(!e.ok)throw new Error("Error en la consulta");return e.json()})).then((e=>{let d="",r="";e.length>0?(d+="<div>",d+="<span>Ubicación</span>",d+="<h3>",d+=`<a href="${t}">${n}</a>`,d+="</h3>",d+="</span>",r+="<ul>",e.forEach((e=>{const n=e._embedded["wp:featuredmedia"]?e._embedded["wp:featuredmedia"]?.[0]?.source_url:`${i}dist/public/images/default.jpg`;r+="<li>",r+=`<img src="${n}" alt="${e.title.rendered}">`,r+="<div>",r+=`<h6>${e.title.rendered}</h6>`,r+=`<a href="${e.link}">Ver más detalles</a>`,r+="</div>",r+="</li>"})),r+="</ul>"):r="<p>No hay dependencias asociadas a esta provincia.</p>",document.getElementById("interactive-map-info").innerHTML=d,document.getElementById("interactive-province-info").innerHTML=r})).catch((e=>{console.error("Error fetching dependencies:",e)}))}))}))}))})();